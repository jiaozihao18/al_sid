data:
  batch_size: 2048
  valid_batch_size: 2048
  num_workers: 4
  train_root: 'datas/reconstruct_data_mask.npz'
  val_root: ''
  train_clip_i2i: [
    'datas/contrastive_data_mask.npz',
  ]
  train_clip_i2v: [ ]
  val_clip: ''
  save_prefix: 'RQVAE_3_8192'
  max_neg_len: 11
  cid_val_root: ''
  gallery_root: ''

model:
  input_dim: 512
  codebook_size: 8192
  codebook_dim: 64
  codebook_num: 3
  kl_div_loss_weight: 0.0
  latent_loss_weight: 0
  latent_weight: '[0.5, 0.5]'
  num_layers: 3
  loss_type: 'mse'
  shared_codebook: False
  restart_unused_codes: True
  VQ_ema: False
  decay: 0.99
  pretrained_codebook: ''
  contrastive: ''
  fuka: False
  do_bn: False
  freeze_lv1: False
  freeze_lv2: False
  batch_loss_weight: 0.75
  neg_loss_weight: 0.25
  rotation_trick: False

train:
  finetune: ''
  start_epoch: 0
  epochs: 150
  warmup_epochs: 40
  lr: 0.002
  blr: 0.0002
  min_lr: 1e-7
  weight_decay: 0.0001
  clip_grad: null
  accum_iter: 1
  layer_decay: 0.0
  norm_pix_loss: True
  decoder_depth: 8
  neg_num: 0
  filter_lr: null
  filter_lr_name: ''

  lr_scheduler:
    name: cosine

  optimizer:
    name: adamw
    eps: 1e-8
    betas: [0.9, 0.999]

eval: false

resume: ''

dist:
  # 设备类型: 'cuda' 或 'npu'，后续代码均基于 device 变量，与具体设备解耦
  device_type: 'cuda'
  distributed: False
  local_rank: -1
  world_size: 1
  rank: 0
  gpu: 0
  dist_url: ''
  dist_backend: ''

seed: 0
finetune: ''
tmp_path: 'ckpts/'
output_dir: ''
pretrain: ''
log_step: 50
